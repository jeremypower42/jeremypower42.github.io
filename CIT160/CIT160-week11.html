<!DOCTYPE html>
<html lang="en">
  <head>
    <title>CIT160 Week 11</title>
    <meta charset="utf-8">
    
    <script>
      function doPayment(){
	  
		var principal = parseFloat(document.getElementById("principal").value);
      
        var annualRate = parseFloat(document.getElementById("annualRate").value);
        
        var years = parseFloat(document.getElementById("years").value);
        
        var periodsPerYear = parseFloat(document.getElementById("periodsPerYear").value);

        var payment = computePayment (principal, annualRate, years, periodsPerYear);
        
        document.getElementById("payment").innerHTML = payment;
        
      }

      function doBalance(){
	  
	    var principal = parseFloat(document.getElementById("principal").value);
      
        var annualRate = parseFloat(document.getElementById("annualRate").value);
        
        var years = parseFloat(document.getElementById("years").value);
        
        var periodsPerYear = parseFloat(document.getElementById("periodsPerYear").value);
		
		var numberOfPaymentPaidToDate = parseFloat(document.getElementById("numberOfPaymentPaidToDate").value);

        var balance = computeBalance (principal, annualRate, years, periodsPerYear, numberOfPaymentPaidToDate);
        
        document.getElementById("balance").innerHTML = balance;
        
      }

      function computePayment (principal, annualRate, years, periodsPerYear){
        
        var a = principal;
        var r = annualRate/periodsPerYear;
        var n = periodsPerYear * years;;
        
        var p = (a*r)/(1-(1+r)**(-n));
		
		
		return p.toFixed(2);
                
      }

      function computeBalance (principal, annualRate, years, periodsPerYear, numberOfPaymentPaidToDate){
        
        var a = principal;
        var r = annualRate/periodsPerYear;
        var p = periodsPerYear;
        var d = numberOfPaymentPaidToDate;
        
        var b = (a*((1+r)**d)) - (p*(((1+r)**d) -1)/r);
		
		return b.toFixed(2);
        
      }
        
  </script>
     
  </head>  
  
  <body>
  
    Amount borrowed(principal)<input type="text" id="principal"><br>
  
    Annual rate(Example: .065)<input type = "text" id = "annualRate"><br>
    
    Number of years<input type = "text" id = "years"><br>
    
    Payment per year<input type = "text" id = "periodsPerYear"><br>
  
    <button class="button" onclick="doPayment()">Compute payment</button>
    
    <div id="payment"></div>
    
    Number of payments paid to date<input type="text" id="numberOfPaymentPaidToDate"><br>
  
    <button class="button" onclick="doBalance()">Compute payoff amount</button>

     <div id="balance"></div>
    
  </body>
</html>
